# This file was automatically generated by sbt-github-actions using the
# githubWorkflowGenerate task. You should add and commit this file to
# your git repository. It goes without saying that you shouldn't edit
# this file by hand! Instead, if you wish to make changes, you should
# change your sbt build configuration to revise the workflow description
# to meet your needs, then regenerate this file.

name: Continuous Integration

on:
  pull_request:
    branches: [master]
  push:
    branches: [master]

jobs:
  ci:
    name: ci
    strategy:
      matrix:
        os: [ubuntu-20.04]
        scala: [2.13.8]
        java: [temurin@1.11]
    runs-on: ${{ matrix.os }}
    env:
      DOCKER_TOKEN: ${{ secrets.DOCKER_TOKEN }}
      DOCKER_USERNAME: ${{ secrets.DOCKER_USERNAME }}
      GITHUB_EVENT_BEFORE: ${{ github.event.before }}
      GITHUB_EVENT_AFTER: ${{ github.event.after }}
    steps:
      - name: Clone and checkout to current branch
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
          submodules: true

      - name: Setup Scala
        uses: olafurpg/setup-scala@v13
        with:
          java-version: ${{ matrix.java }}

      - name: build images
        run: sbt ++${{ matrix.scala }} scalafmtCheckAll test
